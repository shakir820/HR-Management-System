@page
@model HR_Management_System.Pages.ProfileModel
@{
    ViewData["Title"] = "Profile";
    Layout = "~/Views/Shared/_AdminDashboardLayout.cshtml";
}


    <body>
        <script language="javascript" type="text/javascript">
            function getXMLHTTP() { //fuction to return the xml http object
                var xmlhttp = false;
                try {
                    xmlhttp = new XMLHttpRequest();
                }
                catch (e) {
                    try {
                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch (e) {
                        try {
                            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                        }
                        catch (e1) {
                            xmlhttp = false;
                        }
                    }
                }

                return xmlhttp;
            }

            function check_duplicate_emp_id(val) {
                var base_url = 'http://localhost/HRMS-FRESH/';
                var strURL = base_url + "admin/global_controller/check_duplicate_emp_id/" + val;
                var req = getXMLHTTP();
                if (req) {
                    req.onreadystatechange = function () {
                        if (req.readyState == 4) {
                            // only if "OK"
                            if (req.status == 200) {
                                var result = req.responseText;
                                if (result) {
                                    $("#id_error_msg").append(result);
                                    document.getElementById('btn_emp').disabled = true;
                                } else {
                                    document.getElementById('btn_emp').disabled = false;
                                }

                            } else {
                                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                            }
                        }
                    }
                    req.open("POST", strURL, true);
                    req.send(null);
                }

            }
            ;
            function get_employee_by_designations_id(designation_id) {
                var base_url = 'http://localhost/HRMS-FRESH/';
                var strURL = base_url + "admin/global_controller/get_employee_by_designations_id/" + designation_id;
                var req = getXMLHTTP();
                if (req) {
                    req.onreadystatechange = function () {
                        if (req.readyState == 4) {
                            // only if "OK"
                            if (req.status == 200) {
                                var result = req.responseText;

                                $("#employee").html("<option value='' >Select Employee...</option>");
                                $("#employee").append(result);

                            } else {
                                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                            }
                        }
                    }
                    req.open("POST", strURL, true);
                    req.send(null);
                }

            }
            ;
            function check_current_password(val) {
                var base_url = 'http://localhost/HRMS-FRESH/';
                var strURL = base_url + "admin/global_controller/check_current_password/" + val;
                var req = getXMLHTTP();
                if (req) {
                    req.onreadystatechange = function () {
                        if (req.readyState == 4) {
                            // only if "OK"
                            if (req.status == 200) {
                                var result = req.responseText;
                                if (result) {
                                    $("#id_error_msg").css("display", "block");
                                    document.getElementById('sbtn').disabled = true;
                                } else {
                                    $("#id_error_msg").css("display", "none");
                                    document.getElementById('sbtn').disabled = false;
                                }

                            } else {
                                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                            }
                        }
                    }
                    req.open("POST", strURL, true);
                    req.send(null);
                }

            }
            function check_employee_password(val) {

                var base_url = 'http://localhost/HRMS-FRESH/';
                var strURL = base_url + "employee/dashboard/check_employee_password/" + val;

                var req = getXMLHTTP();
                if (req) {
                    req.onreadystatechange = function () {
                        if (req.readyState == 4) {
                            // only if "OK"
                            if (req.status == 200) {
                                var result = req.responseText;
                                if (result) {
                                    $("#id_error_msg").css("display", "block");
                                    document.getElementById('sbtn').disabled = true;
                                } else {
                                    $("#id_error_msg").css("display", "none");
                                    document.getElementById('sbtn').disabled = false;
                                }

                            } else {
                                alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                            }
                        }
                    }
                    req.open("POST", strURL, true);
                    req.send(null);
                }

            }
            ;


        </script>

        <div class="container-fluid">

            <form role="form" id="update_profile" action="http://localhost/HRMS-FRESH/admin/settings/profile_updated" method="post" class="form-horizontal form-groups-bordered" novalidate="novalidate">
                <div class="col-sm-12 wrap-fpanel">
                    <div class="panel panel-default" data-collapsed="0">
                        <div class="panel-heading">
                            <div class="panel-title">
                                <strong>Update Profile</strong>
                            </div>
                        </div>
                        <div class="panel-body">

                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">First Name <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="text" name="first_name" value="Al" class="form-control" placeholder="Enter Your First Name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">Last Name <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="text" name="last_name" value="Amin" class="form-control" placeholder="Enter Your Last Name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">User Name <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="text" name="user_name" value="admin" class="form-control" placeholder="Enter Your User Name">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-4 col-sm-5">
                                    <button type="submit" class="btn btn-primary">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <form role="form" id="change_password" action="http://localhost/HRMS-FRESH/admin/settings/set_password" method="post" class="form-horizontal form-groups-bordered" novalidate="novalidate">
                <div class="col-sm-12 wrap-fpanel">
                    <div class="panel panel-default" data-collapsed="0">
                        <div class="panel-heading">
                            <div class="panel-title">
                                <strong>Change Password</strong>
                            </div>
                        </div>
                        <div class="panel-body">

                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">Old Password <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="password" name="old_password" value="" class="form-control" placeholder="Enter Your Old Password" onchange="check_current_password(this.value)">
                                    <span id="id_error_msg"><small style="padding-left:10px;color:red;font-size:10px">Your Entered Password Do Not Match !</small></span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">New Password <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="password" name="new_password" id="new_password" value="" class="form-control" placeholder="Enter Your New Password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="field-1" class="col-sm-4 control-label">Confirm Password <span class="required" aria-required="true"> *</span></label>
                                <div class="col-sm-7">
                                    <input type="password" name="confirm_password" value="" class="form-control" placeholder="Enter Your Retype Password">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-offset-4 col-sm-5">
                                    <button type="submit" id="sbtn" class="btn btn-primary">Update</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>
                </div>
            </form>
        </div>

    </body>
